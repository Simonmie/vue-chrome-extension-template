# 起步

## 安装依赖

```npm
npm install
```

## 模板结构

```bash
├── assets
├── background
│   ├── dev-hmr.js  // 开发环境下的热更新脚本
│   └── main.js  // 背景脚本
├── logic
│   └── common-setup.js  // 公共设置脚本
├── manifest.js // manifest.json 生成脚本
├── options // 选项页
│   ├── OptionsPage.vue
│   ├── index.html
│   └── main.js
├── popup // 弹窗
│   ├── PopupComponent.vue
│   ├── index.html
│   └── main.js
├── sidepanel // 侧边栏
│   ├── SidePanel.vue
│   ├── assets
│   │   └── logo.png
│   ├── index.html
│   └── main.js
└── utils
    ├── base.js // 基础工具函数
    └── config.js // 配置文件函数
```

## 如何开发？

### 启动热更新

```npm
npm run dev:ext
```

### 安装扩展

1. 打开 Chrome 浏览器。
2. 点击浏览器菜单（通常是三个垂直点图标），选择“更多工具”>“扩展程序”。
3. 在扩展程序页面，打开“开发者模式”。
4. 点击“加载已解压的扩展程序”，选择项目根目录下的 `extension` 文件夹。

## 如何打包发布？

### CRX 打包

```npm
npm run build:crx
```

执行该命令会完成以下操作：

1. 构建扩展代码
2. 自动生成/复用密钥文件 (`key.pem`)
3. 生成 `extension.crx` 安装文件
4. 生成 `extension.zip` 发布包

### 打包输出

执行成功后，项目根目录会生成以下文件：

- `extension.crx`: Chrome 扩展安装文件（可直接拖拽到 Chrome 安装）
- `extension.zip`: Chrome Web Store 发布包（用于上传到商店）
- `key.pem`: 扩展签名密钥（仅首次运行生成，会被自动忽略提交）

### 密钥说明

- 密钥用于验证扩展的完整性和开发者身份
- 首次运行会自动生成，后续运行会复用现有密钥
- 密钥文件 `key.pem` 已添加到 `.gitignore`，不会被提交到代码仓库
- 请妥善保存密钥，丢失会导致无法更新已发布的扩展

### 安装 CRX 文件

1. 打开 Chrome 浏览器的扩展管理页面
2. 将生成的 `extension.crx` 文件拖拽到页面中
3. 点击“添加扩展程序”确认安装

### 发布到 Chrome Web Store

1. 登录 [Chrome Web Store Developer Dashboard](https://chrome.google.com/webstore/devconsole)
2. 点击“新扩展程序”或选择现有扩展
3. 上传生成的 `extension.zip` 文件
4. 填写扩展信息并提交审核
